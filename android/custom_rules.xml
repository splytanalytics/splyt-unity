<?xml version="1.0" encoding="UTF-8"?>
<project>
    <!-- Note that this project is not meant to be loaded directly but rather through the build.xml file-->

    <!--
        When building from the command line, we don't want the output to be classes.jar.
        Instead, we want it to match what is output when building in eclipse, so we override that name here.
        See http://code.google.com/p/android/issues/detail?id=37601
    -->
    <target name="-set-outfilename">
        <property name="out.library.jar.file" location="${out.absolute.dir}/${ant.project.name}.jar"/>
    </target>

    <!-- Set the output file name before compilation -->
    <target name="-pre-compile" depends="-set-outfilename"/>

    <!-- Override the -code-gen target, we don't need this -->
    <target name="-code-gen"/>

    <target name="-post-build">
        <!-- Combine the output SplytANE.jar with the native splyt-android.jar as the ANE can only contain one jar file. -->
        <move file="${out.library.jar.file}" tofile="${out.absolute.dir}/temp.jar"/>
        <jar destfile="${out.library.jar.file}">
            <zipfileset src="${out.absolute.dir}/temp.jar"/>
            <zipfileset src="libs/splyt-android.jar"/>
        </jar>
    </target>
</project>
